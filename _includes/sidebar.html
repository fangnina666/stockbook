<div class="sb">
  <input id="sb-search" type="search" placeholder="搜尋報告…" />

  <nav id="sb-results" class="sb-results"></nav>

  <details open class="sb-list">
    <summary><strong>所有報告</strong></summary>
    <ul>
    {% assign pages = site.pages | where_exp:'p','p.path contains "reports_his/"' | sort: 'name' | reverse %}
    {% for p in pages %}
      <li><a href="{{ p.url | relative_url }}">{{ p.title | default: p.name | remove: ".md" }}</a></li>
    {% endfor %}
    </ul>
  </details>
</div>

<script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script>
<script>
  SimpleJekyllSearch({
    searchInput: document.getElementById('sb-search'),
    resultsContainer: document.getElementById('sb-results'),
    json: '{{ "/search.json" | relative_url }}',
    searchResultTemplate: '<div><a href="{url}">{title}</a></div>',
    noResultsText: '<div class="sb-none">沒有結果</div>',
    limit: 50,
    fuzzy: true
  });
</script>

<style>
/* 簡單側欄樣式 */
.sb { position: sticky; top: 1rem; display: block; }
.sb input { width: 100%; padding: .5rem .6rem; margin-bottom: .5rem; }
.sb-results div { margin: .25rem 0; }
.sb-list { margin-top: .75rem; }
.sb-none { color: #666; font-size: .9em; }
</style>
